<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title> üß† ResQMinds: Health & Safety Survival Game</title>
<style>
body {
  margin: 0;
  font-family: "Segoe UI", sans-serif;
  display: flex;
  flex-direction: column;
  align-items: center;
  min-height: 100vh;
  color: #f1f1f1;
  background: linear-gradient(-45deg, #0a0f2e, #0d1a44, #0a0f2e, #000000);
  background-size: 400% 400%;
  animation: gradientBG 30s ease infinite;
}

@keyframes gradientBG {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

header {
  width: 100%;
  padding: 15px;
  text-align: center;
  font-size: 1.8rem;
  font-weight: bold;
  background: #1a1a1a;
  color: #4cc9f0;
  box-shadow: 0 2px 10px rgba(0,0,0,0.6);
}

#hud {
  margin-top: 20px;
  display: flex;
  justify-content: space-between;
  width: 80%;
  font-size: 1.1rem;
}

#game-box {
  margin-top: 40px;
  max-width: 650px;
  background: rgba(30,30,30,0.9);
  padding: 30px;
  border-radius: 20px;
  box-shadow: 0 0 30px #4cc9f0, 0 0 60px #06d6a0 inset;
  text-align: center;
  line-height: 1.6;
  transform: scale(1);
  transition: transform 0.3s ease;
}

#game-box:hover { transform: scale(1.02); }

#scenario-title { font-size: 1.4rem; margin-bottom: 6px; color: #e6f9ff; }
#scenario-text { margin-bottom: 10px; color: #dfefff; min-height: 2.4em; }
#mentor { margin: 14px 0; font-size: 1.05rem; color: #ffd166; min-height: 64px; }
.choices { display: flex; flex-direction: column; gap: 12px; margin-top: 12px; }
button {
  border: none;
  padding: 12px 14px;
  font-size: 1rem;
  font-weight: 700;
  color: #fff;
  border-radius: 12px;
  cursor: pointer;
  background: linear-gradient(90deg,#3a86ff,#06d6a0);
  box-shadow: 0 6px 18px rgba(58,134,255,0.12);
  transition: transform .14s ease, box-shadow .14s ease;
  text-align: left;
}
button.small { padding: 10px 12px; font-size: .95rem; width: auto; }
button:hover { transform: translateY(-3px); box-shadow: 0 10px 24px rgba(58,134,255,0.18); }

#review {
  margin-top: 18px;
  text-align: left;
  background: #232323;
  padding: 12px;
  border-radius: 10px;
  color: #e6e6e6;
  display: none;
}

#review h3 { margin: 0 0 8px 0; color: #ffcf66; }
#review ul { padding-left: 18px; margin: 0; }
footer { margin-top: auto; padding: 12px; font-size: 0.9rem; color: #999; }

/* Mascots */
.mascot-left, .mascot-right {
  position: fixed;
  bottom: 100px;
  width: 400px; /* increased size */
  cursor: pointer;
  animation: float 3s ease-in-out infinite;
  filter: drop-shadow(0 6px 12px rgba(0,0,0,0.6));
}

.mascot-left {
  left: calc(50% - 650px - 86px); /* shifted 40px more to the left */
}

.mascot-right {
  left: calc(50% + 340px); /* shifted 40px more to the left */
}


@keyframes float { 0% { transform: translateY(0); } 50% { transform: translateY(-10px); } 100% { transform: translateY(0); } }

/* Confetti */
.confetti { position: fixed; top:-10px; width:10px; height:10px; border-radius:50%; pointer-events:none; animation: fall 3s linear forwards; }
@keyframes fall { to { transform: translateY(100vh) rotate(720deg); opacity: 0; } }

/* small helpers */
.muted { color: #bfcbd6; font-size: .95rem; }
.center { text-align: center; }
.two-btns { display:flex; gap:10px; justify-content:center; margin-top:10px; flex-wrap:wrap; }
.final-summary { text-align:left; }

</style>
</head>
<body>

<header>üß† ResQMinds: Health & Safety Survival Game</header>

<div id="hud">
  <div>‚ù§ Lives: <strong><span id="lives">3</span></strong></div>
  <div>‚≠ê Score: <strong><span id="score">0</span></strong></div>
  <div>üìç Level: <strong><span id="level">1</span></strong></div>
</div>

<div id="game-box">
  <h2 id="scenario-title">Welcome to ResQMinds!</h2>
  <p id="scenario-text">Press Start to begin your survival training üöÄ</p>
  <div id="mentor" class="muted">AIGuide: Tips and guidance will appear here.</div>
  <div class="choices" id="choices">
    <button style="background:#2a9d8f" onclick="startGame()">‚ñ∂ Start Game</button>
  </div>
  <div id="review"></div>
</div>

<!-- Two mascots -->
<img class="mascot-left" src="mascot.png" alt="Mascot Left" />
<img class="mascot-right" src="mascot.png" alt="Mascot Right" />

<footer> By Team Code Red ‚ú®</footer>

<script>
let score = 0, lives = 3, level = 1;
let currentScenarioIndex = 0, currentLevelIndex = 0;
let shuffledScenarios = [];
let scenarioStartLives = 3;
let mistakesThisScenario = [];
let mistakesByScenario = [];

const scoreEl = document.getElementById("score");
const livesEl = document.getElementById("lives");
const levelEl = document.getElementById("level");
const scenarioTitle = document.getElementById("scenario-title");
const scenarioText = document.getElementById("scenario-text");
const mentorDiv = document.getElementById("mentor");
const choicesDiv = document.getElementById("choices");
const reviewDiv = document.getElementById("review");

/* Scenario data (4 scenarios, 3 levels each, shuffled replies) */
const allScenarios = [
  {
    title: "Dog Bite Emergency",
    levels: [
      {
        text: "Someone was bitten by a dog. First step?",
        choices: [
          { text: "üöø Wash wound", correct: true, replies: ["Good! Rabies risk reduced.", "Correct! Cleaning is life-saving.", "Right choice ‚Äî wash immediately."] },
          { text: "ü©π Bandage", correct: false, replies: ["Wrong! Clean first.", "Not safe!", "Bandaging traps infection."] },
          { text: "‚è≥ Wait & watch", correct: false, replies: ["Dangerous!", "Delay is fatal.", "Immediate action needed!"] }
        ]
      },
      {
        text: "After cleaning, next step?",
        choices: [
         
          { text: "üíä Rest at home", correct: false, replies: ["Incorrect, vaccine needed.", "Won't prevent rabies.", "Not effective."] },
          { text: "üåø Turmeric paste", correct: false, replies: ["Folk remedy won't help.", "Wrong!", "Dangerous choice!"] }, { text: "üè• Hospital rabies shots", correct: true, replies: ["Yes! Vaccine is critical.", "Correct choice.", "Life-saving step."] }
        ]
      },
      {
        text: "Complete vaccine schedule?",
        choices: [
{ text: "ü§ï Only painkillers", correct: false, replies: ["Doesn't prevent rabies.", "Wrong.", "Ineffective."] },
          { text: "üíâ Yes", correct: true, replies: ["Perfect! Full protection.", "Correct.", "Good job!"] },
          { text: "üíä One dose only", correct: false, replies: ["No!", "Incomplete protection.", "Wrong choice."] }
          
        ]
      }
    ]
  },
  {
    title: "Fire Emergency",
    levels: [
      {
        text: "Kitchen fire in a pan. Action?",
        choices: [
          
{ text: "üßØ Use extinguisher", correct: true, replies: ["Good! Fire stopped.", "Correct!", "Well done!"] },
{ text: "üíß Pour water", correct: false, replies: ["Dangerous!", "Wrong!", "Causes explosion."] },
          { text: "üö™ Run outside", correct: false, replies: ["Too early!", "Not best option.", "Risky."] }
        ]
      },
      {
        text: "Fire spreads, smoke rising!",
        choices: [
          { text: "üö™ Evacuate", correct: true, replies: ["Correct! Safety first.", "Yes!", "Good decision."] },
          { text: "üìû Call help inside", correct: false, replies: ["Unsafe!", "Incorrect!", "Risky."] },
          { text: "üßØ Keep fighting", correct: false, replies: ["Too risky!", "Wrong choice.", "Dangerous."] }
        ]
      },
      {
        text: "Building fills with smoke. Action?",
        choices: [
          { text: "‚¨á Stay low & crawl", correct: true, replies: ["Right! Avoid smoke.", "Correct!", "Well done!"] },
          
          { text: "‚Üî Open windows", correct: false, replies: ["Incorrect.", "Dangerous!", "Not safe."] },
{ text: "‚¨Ü Run upstairs", correct: false, replies: ["Wrong! More smoke.", "Dangerous.", "Incorrect choice."] }
        ]
      }
    ]
  },
  {
    title: "Chest Pain Emergency",
    levels: [
      {
        text: "Person clutches chest, collapses. Action?",
        choices: [
          { text: "üìû Call emergency", correct: true, replies: ["Good! Help on the way.", "Correct!", "Right move!"] },
          
          { text: "üíß Give water", correct: false, replies: ["Wrong!", "Time wasted.", "Ineffective."] },
{ text: "üö∂ Walk it off", correct: false, replies: ["Risky!", "Wrong choice.", "Dangerous."] }
        ]
      },
      {
        text: "Unresponsive & not breathing. Action?",
        choices: [
          
          { text: "üìû Call friend", correct: false, replies: ["Wastes time!", "Wrong!", "Not helpful."] },
{ text: "‚ù§ Start CPR", correct: true, replies: ["Yes! Circulation maintained.", "Good!", "Correct action."] },
          { text: "üí§ Sleeping position", correct: false, replies: ["Wrong!", "Does nothing.", "Ineffective."] }
        ]
      },
      {
        text: "Ambulance arrives. Medic asks: Did you do CPR?",
        choices: [
          { text: "‚úÖ Yes", correct: true, replies: ["Survival chance improved!", "Good!", "Correct!"] },
          { text: "üò∞ Froze", correct: false, replies: ["Panic costs lives!", "Incorrect.", "Bad choice."] },
          { text: "‚ùå No", correct: false, replies: ["Delay reduced survival!", "Wrong!", "Bad outcome."] }
        ]
      }
    ]
  },
  {
    title: "Choking Emergency",
    levels: [
      {
        text: "Friend choking, can't breathe. First step?",
        choices: [
{ text: "üíß Give water", correct: false, replies: ["Wrong!", "Dangerous.", "Cannot help."] },
          { text: "ü§≤ Abdominal thrusts", correct: true, replies: ["Right! Clears airway.", "Correct!", "Well done!"] },
          { text: "üôÖ Do nothing", correct: false, replies: ["Delays are fatal.", "Wrong!", "Incorrect choice."] }
          
        ]
      },
      {
        text: "They collapse unconscious. Action?",
        choices: [
          { text: "üöë Call emergency & CPR", correct: true, replies: ["Correct! Oxygen maintained.", "Good!", "Right move!"] },
          { text: "üèÉ Wait for others", correct: false, replies: ["Too late!", "Incorrect!", "Not safe."] },
          { text: "üõå Side position", correct: false, replies: ["Ineffective.", "Wrong choice.", "Doesn't help."] }
        ]
      },
      {
        text: "Object dislodges. Next?",
        choices: [
          { text: "üè• Seek medical evaluation", correct: true, replies: ["Correct! Check for injury.", "Good!", "Well done!"] },
          
          { text: "üçΩ Continue eating", correct: false, replies: ["Wrong!", "Not safe.", "Incorrect."] },
{ text: "üòÖ Ignore", correct: false, replies: ["Dangerous!", "Incorrect.", "Unsafe."] },
        ]
      }
    ]
  }
];

/* --- Shuffle helper --- */
function shuffleReplies(arr){ return arr.sort(()=>Math.random()-0.5); }
function escapeHtml(s){ return String(s).replace(/[&<>"'`]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":"&#39;", '`': '&#96;'}[c])); }

function updateHUD(){ scoreEl.textContent = score; livesEl.textContent = lives; levelEl.textContent = level; }

function startGame(){
  score = 0; lives = 3; level = 1;
  currentScenarioIndex = 0; currentLevelIndex = 0;
  shuffledScenarios = [...allScenarios];
  mistakesByScenario = allScenarios.map(()=>[]);
  scenarioStartLives = lives;
  mistakesThisScenario = [];
  reviewDiv.style.display = 'none';
  updateHUD();
  loadScenario();
}

function loadScenario(){
  if(currentScenarioIndex>=shuffledScenarios.length){ showFinalSummary(); return; }
  if(currentLevelIndex===0){ scenarioStartLives=lives; mistakesThisScenario=[]; }
  const scenario=shuffledScenarios[currentScenarioIndex];
  const levelData=scenario.levels[currentLevelIndex];
  scenarioTitle.textContent=`${scenario.title} ‚Äî Level ${currentLevelIndex+1}`;
  scenarioText.textContent=levelData.text;
  mentorDiv.textContent="AIGuide: Choose wisely!";
  choicesDiv.innerHTML=''; reviewDiv.style.display='none';
  levelData.choices.forEach(choice=>{
    const btn=document.createElement('button');
    btn.textContent=choice.text;
    btn.onclick=()=>handleAnswer(choice, levelData);
    choicesDiv.appendChild(btn);
  });
}

function handleAnswer(choice, levelData){
  const reply=shuffleReplies([...choice.replies])[0];
  mentorDiv.innerHTML=choice.correct?`üëè Correct!<br>${escapeHtml(reply)}`:`üòÖ Wrong!<br>${escapeHtml(reply)}`;
  if(choice.correct){ score+=10; launchConfetti(); }
  else { lives--; const correctObj=levelData.choices.find(c=>c.correct); const correctText=correctObj?correctObj.text:'(unknown)'; const mistake=`At "${shuffledScenarios[currentScenarioIndex].title}" ‚Äî Level ${currentLevelIndex+1}, chose "${choice.text}". Correct: "${correctText}".`; mistakesThisScenario.push(mistake); mistakesByScenario[currentScenarioIndex].push(mistake);}
  updateHUD();
  if(lives<=0){ setTimeout(gameOver,900); return; }
  setTimeout(nextLevel,900);
}

function nextLevel(){
  const scenario=shuffledScenarios[currentScenarioIndex];
  if(currentLevelIndex<scenario.levels.length-1){ currentLevelIndex++; level++; updateHUD(); loadScenario(); return; }
  showScenarioCompletion();
}

function showScenarioCompletion(){
  const scenario=shuffledScenarios[currentScenarioIndex];
  const livesLost=scenarioStartLives-lives;
  let reviewHTML='';
  if(mistakesThisScenario.length===0){ reviewHTML+='<p>üåü Perfect run ‚Äî no mistakes in this scenario.</p>'; }
  else{ reviewHTML+='<h3>üìã Performance Review ‚Äî details</h3><ul>'; for(const m of mistakesThisScenario){ reviewHTML+=`<li>${escapeHtml(m)}</li>`;} reviewHTML+='</ul>'; }
  reviewHTML+=`<p class="muted">Lives lost this scenario: ${livesLost}</p>`;
  scenarioTitle.textContent=`${scenario.title} ‚úÖ Completed!`;
  scenarioText.innerHTML=reviewHTML;
  mentorDiv.textContent='You completed this scenario!';
  choicesDiv.innerHTML='';
  const continueBtn=document.createElement('button'); continueBtn.textContent='‚û° Continue to Next Scenario'; continueBtn.className='small'; continueBtn.style.background='#06d6a0'; continueBtn.onclick=()=>{currentScenarioIndex++; currentLevelIndex=0; level++; updateHUD(); loadScenario();};
  const restartScenarioBtn=document.createElement('button'); restartScenarioBtn.textContent='üîÅ Restart This Scenario'; restartScenarioBtn.className='small'; restartScenarioBtn.style.background='#f77f00'; restartScenarioBtn.onclick=()=>{currentLevelIndex=0; mistakesByScenario[currentScenarioIndex]=[]; mistakesThisScenario=[]; loadScenario();};
  const restartGameBtn=document.createElement('button'); restartGameBtn.textContent='üîÑ Restart Game'; restartGameBtn.className='small'; restartGameBtn.style.background='#e63946'; restartGameBtn.onclick=startGame;
  const wrapper=document.createElement('div'); wrapper.className='two-btns'; wrapper.appendChild(continueBtn); wrapper.appendChild(restartScenarioBtn); wrapper.appendChild(restartGameBtn); choicesDiv.appendChild(wrapper);
  reviewDiv.style.display='block'; reviewDiv.innerHTML=reviewHTML;
}

function showFinalSummary(){
  scenarioTitle.textContent="üèÅ Final Summary";
  scenarioText.textContent=`Great work ‚Äî total score: ${score}`;
  mentorDiv.textContent="AIGuide: Review your performance below.";
  let html=`<div class="final-summary"><h3>Report Card</h3>`;
  for(let i=0;i<shuffledScenarios.length;i++){
    const s=shuffledScenarios[i]; const mistakes=mistakesByScenario[i]||[];
    html+=`<h4 style="margin-bottom:4px">${escapeHtml(s.title)}</h4>`;
    if(mistakes.length===0){ html+=`<p class="muted">‚úÖ Perfect ‚Äî no mistakes</p>`;}
    else{ html+='<ul>'; for(const m of mistakes) html+=`<li>${escapeHtml(m)}</li>`; html+='</ul>';}
  }
  html+='</div>';
  choicesDiv.innerHTML='';
  const restartBtn=document.createElement('button'); restartBtn.textContent='üîÑ Restart Game'; restartBtn.style.background='#06d6a0'; restartBtn.onclick=startGame; choicesDiv.appendChild(restartBtn);
  reviewDiv.style.display='block'; reviewDiv.innerHTML=html;
}

function gameOver(){
  scenarioTitle.textContent="üíÄ Game Over!"; scenarioText.textContent="You ran out of lives."; mentorDiv.textContent=''; choicesDiv.innerHTML='';
  const retryBtn=document.createElement('button'); retryBtn.textContent='üîÅ Restart This Scenario'; retryBtn.style.background='#f77f00'; retryBtn.onclick=()=>{currentLevelIndex=0; mistakesByScenario[currentScenarioIndex]=[]; mistakesThisScenario=[]; lives=3; updateHUD(); loadScenario();};
  const restartBtn=document.createElement('button'); restartBtn.textContent='üîÑ Restart Game'; restartBtn.style.background='#e63946'; restartBtn.onclick=startGame;
  const wrapper=document.createElement('div'); wrapper.className='two-btns'; wrapper.appendChild(retryBtn); wrapper.appendChild(restartBtn); choicesDiv.appendChild(wrapper);
  reviewDiv.style.display='none';
}

function launchConfetti(){ for(let i=0;i<18;i++){ const c=document.createElement('div'); c.className='confetti'; c.style.left=Math.random()*100+'vw'; c.style.background=`hsl(${Math.floor(Math.random()*360)},90%,60%)`; c.style.width=`${8+Math.random()*8}px`; c.style.height=c.style.width; c.style.opacity=0.95; document.body.appendChild(c); setTimeout(()=>c.remove(),3200); }}

/* Mascot click */
document.querySelectorAll('.mascot-left, .mascot-right').forEach(m=>{
  m.addEventListener('click',()=>{ mentorDiv.textContent="ü¶â Mascot: Keep going ‚Äî you learn by doing. Good luck!"; });
});

updateHUD();
</script>
</body>
</html>
